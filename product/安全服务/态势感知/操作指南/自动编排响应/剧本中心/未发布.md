本文档介绍剧本中心未发布的剧本列表，可以查看所有未发布过的自定义剧本。

##  前提条件
自动编排响应功能目前正在试用中，获得内测邀请的用户可获得免费试用资格，您可通过 [申请内测](https://cloud.tencent.com/apply/p/w5svog9t1nj) 进行使用。

## 筛选剧本
1. 登录 [安全运营中心控制台](https://console.cloud.tencent.com/ssav2/soar)，在左侧导航栏，单击【自动编排响应】>【剧本中心】>【未发布】，进入未发布剧本列表。
2. 在未发布剧本列表，您可通过类型、状态和关键字对剧本进行查询。
 - 类型分为响应类和统计类，单击左上角的类型下拉框，按类型对剧本进行筛选。
 - 状态分为编辑未测试、测试中、测试通过和测试失败，单击左上角的状态下拉框，按状态对剧本进行筛选。
 - 单击搜索框，可通过“剧本名称和针对事件”关键字对剧本进行查找。
![](https://main.qcloudimg.com/raw/f30a5c5e60085c126224f252d112a136.png)

## 新建剧本
1. 登录 [安全运营中心控制台](https://console.cloud.tencent.com/ssav2/soar)，在左侧导航栏，单击【自动编排响应】>【剧本中心】>【未发布】，进入未发布剧本列表。
2. 在未发布剧本列表，单击【新建剧本】，进入新建剧本页面。
![](https://main.qcloudimg.com/raw/2e992797b233f199f89460cad95eaef9.png)
3.  在新建剧本页面，输入剧本名称和剧本描述，选择剧本类型和针对事件后，单击【下一步】进入自定义图谱编排页面。
>?
>- 若剧本类型选择“响应类”：针对事件需选择同一来源的事件，目前支持选择“主机安全”和“流量威胁感知”来源的事件。
>- 若剧本类型选择“统计类”：可从“事件来源”、“事件类型”、“事件子类”、“事件名称”四个维度选择待统计的事件；运行时间可选择每天、每周、每月三个维度统计；若选择每周/每月，则每周一/每月一号生成上周/上月的统计报告。
4. 在自定义图谱编排页面页面，选择所需图谱编排后，单击【生成剧本】生成自定义剧本，并自动跳转剧本测试页面。
>?
>- 图谱至少要包含 2 个动作节点，请正确设置图谱动作节点。
>- 若生成剧本失败，则请您检查所有节点的参数均已配置并完成所有节点的连线后重新生成。
>
![](https://main.qcloudimg.com/raw/c865c54038d5a7c45bcd2215cc60b363.png)
5. 剧本测试是为了验证自定义剧本是否编排正确，您需选择已发生的安全事件的进行测试，测试过程中系统不会进行封禁 IP、隔离/信任病毒文件、变更事件状态操作，不影响线上业务。
 - 响应类剧本：需输入事件 ID（在安全事件列表中获取），选择已发生的安全事件，并单击【开始测试】进行剧本测试。剧本将会模拟执行，并显示执行结果，您可查看所有节点的执行结果以及是否成功。
 - 统计类剧本：单击【开始测试】进行剧本测试。剧本将会模拟执行，并显示执行结果，您可查看所有节点的执行结果以及是否成功。
6. 当剧本测试通过后，单击【发布】发布剧本，并选择是否发布后立即启用剧本。
>?若您发布的剧本针对事件被其他启用中的剧本占用，则在发布成功后会关闭剧本的启用状态。
>![](https://main.qcloudimg.com/raw/bb108dcb6f303135a0855407964ea9fe.png)

## 编辑剧本
1. 登录 [安全运营中心控制台](https://console.cloud.tencent.com/ssav2/soar)，在左侧导航栏，单击【自动编排响应】>【剧本中心】>【未发布】，进入未发布剧本列表。
2. 在未发布剧本列表，单击【编辑】，进入编辑剧本页面。
>?编辑剧本需先关闭启用状态。
>
![](https://main.qcloudimg.com/raw/3f32cf3dd9cedffc5542ec7f7c99242d.png)
3.  在编辑剧本页面，可修改剧本名称、剧本描述和针对事件，修改后单击【下一步】，进入自定义图谱编排页面。
>?统计类型可修改运行周期和运行时间段。
4. 在自定义图谱编排页面，修改所需图谱编排后，单击【生成剧本】生成自定义剧本，并自动跳转剧本测试页面。
>?
>- 图谱至少要包含 2 个动作节点，请正确设置图谱动作节点。
>- 若生成剧本失败，则请您检查所有节点的参数均已配置并完成所有节点的连线后重新生成。
>
![](https://main.qcloudimg.com/raw/c865c54038d5a7c45bcd2215cc60b363.png)
5. 剧本测试是为了验证自定义剧本是否编排正确，您需选择已发生的安全事件的进行测试，测试过程中系统不会进行封禁 IP、隔离/信任病毒文件、变更事件状态操作，不影响线上业务。
 - 响应类剧本：需输入事件 ID（在安全事件列表中获取），选择已发生的安全事件，并单击【开始测试】进行剧本测试。剧本将会模拟执行，并显示执行结果，您可查看所有节点的执行结果以及是否成功。
 - 统计类剧本：单击【开始测试】进行剧本测试。剧本将会模拟执行，并显示执行结果，您可查看所有节点的执行结果以及是否成功。
6. 测试完毕后，可单击【发布】，即可完成修改剧本。

## 删除剧本
1. 登录 [安全运营中心控制台](https://console.cloud.tencent.com/ssav2/soar)，在左侧导航栏，单击【自动编排响应】>【剧本中心】>【未发布】，进入未发布剧本列表。
2. 在未发布剧本列表，单击【删除】，弹出“确认删除”弹窗。
>?选择多个剧本，单击①处【删除】，可批量删除剧本。
>
![](https://main.qcloudimg.com/raw/82e6ef9a607421f7d6b89cd4973e0f72.png)
3. 在“确认删除”弹窗，单击【确定】，即可删除剧本。

## 列表参数说明
在[ 未发布剧本列表](https://console.cloud.tencent.com/ssav2/playbooks)，具体参数如下所示：
1. 针对事件：表示该部分安全事件是通过该剧本响应的。多个事件时，可将鼠标悬浮事件个数查看全部事件。
>?统计类剧本若在创建剧本时通过事件类型或事件来源维度统计，则此处相应显示为针对事件类型或针对事件源，表示剧本响应该事件类型或事件来源下的所有事件。
>
 ![](https://main.qcloudimg.com/raw/11db341d7ea186eb4e1effc884ffe474.png)
2. 状态：未发布剧本状态分为编辑未测试、测试中、测试通过、测试失败。
 - 当剧本已生成且但未测试时，状态显示为“编辑未测试”，可编辑和删除剧本。
 - 当剧本测试通过时，状态显示为“测试通过”，可发布剧本，也可编辑和删除剧本。
 - 当剧本测试未通过时，状态显示为“测试失败”，可编辑和删除剧本。
 - 当剧本测试中时，状态显示为“测试中”，可编辑和删除剧本。
3. 操作：可编辑或删除。
