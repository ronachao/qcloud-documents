## 操作场景

集群是 TDMQ RocketMQ 版中的一个资源维度，不同集群的命名空间、Topic、Group 等完全隔离。每个集群会有集群的资源限制例如 Topic 总数、消息保留时长等。常见的使用方式如：开发测试环境使用一个专门集群，生产环境使用一个专门的集群。

**TDMQ 资源层次关系**
![](https://main.qcloudimg.com/raw/a98447d277622f79a33a9e5376d4ea95.png)

## 操作步骤

### 创建集群

1. 登录 [TDMQ 控制台](https://console.cloud.tencent.com/tdmq)，进入**集群管理**页面。
2. 在**集群管理**页面，选择地域后，单击**新建**进入新建集群对话框。
3. 在新建集群对话框，设置集群的相关属性。
   ![](https://main.qcloudimg.com/raw/499c8c39bf37f1b39985e09d6ac6ee21.png)
   - 集群名称：设置环境的名称，3-64个字符，只能包含字母、数字、“-”及“_”
   - 说明：环境设置的备注说明，不能超过128个字符
4. 单击**确定**完成所在地域环境的创建。
> !
> - 每个地域最多可以创建5个虚拟集群。
> - 公测期间不收取任何资源占用费。

后续步骤：

1. 获取接入地址，得到服务端的连接信息。
2. 在集群中创建 [命名空间](https://cloud.tencent.com/document/product/1493/61595)。 
3. 在集群中创建 [角色](https://cloud.tencent.com/document/product/1493/61599) 并授予该命名空间的生产消费权限。
4. 在命名空间中创建 [Topic ](https://cloud.tencent.com/document/product/1493/61597)。 
5. 按照 [SDK 文档 ](https://cloud.tencent.com/document/product/1493/61652) 的提示编写 Demo，配置上连接信息，进行消息的生产和消费。

### 查看集群详情

在**集群管理**列表页，单击操作列的**查看详情**，进入集群详情页面。

在详情页中，您可以查询到：

- 集群概况（Topic 数量、近24小时消息生产数量、当前消息堆积数量）
- 集群的基础信息（集群名称/ID、地域、创建时间、说明）
- 实例配置：

| 实例配置          | 配置说明                                                     |
| ----------------- | ------------------------------------------------------------ |
| 命名空间 TPS 上限 | 命名空间的 TPS 上限，如果超出此上限会对请求进行限流处理（生产 TPS + 消费 TPS） |
| 命名空间数量上限  | 命名空间可创建的最大数量                                     |
| Topic 数量上限    | Topic 可创建的最大数量                                       |
| Group 数量上限    | Group 可创建的最大数量                                       |
| 消息保留时间      | 消息保留可配置的最长时间，在命名空间级别可以配置比这个更短的时间 |
| 消息最大延时      | 消息延迟消费的最长时间                                       |

![](https://main.qcloudimg.com/raw/35d27c2873af355df373c6d389bf9888.png)

### 获取接入地址

在**集群管理**列表页，单击操作列的**接入地址**，可获取集群的接入地址。

![](https://main.qcloudimg.com/raw/4fed5e6a2497995613b645f6a9a7e206.png)

### 编辑集群

1. 在**集群管理**列表页，单击操作列的**编辑**。
2. 在弹窗中填写集群名称和集群说明，单击提交。

### 删除集群

如果想删掉创建的集群，可以通过以下步骤操作：

1. 在**集群管理**列表页，单击操作列的**删除**。
2. 在删除的确认弹框中，单击**删除**，即可删除集群。

>!删除后，该集群下的所有配置都会被清空，且无法恢复，请谨慎操作。
