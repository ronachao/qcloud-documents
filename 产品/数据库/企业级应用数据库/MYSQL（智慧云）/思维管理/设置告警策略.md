
## 背景介绍
告警策略指用于调整告警指标阀值及相关策略。包含公共策略和私有策略两种策略类型，说明如下：
- 公共策略：由系统默认生成，系统默认关联公有策略。可以修改，但不能删除。
- 私有策略：用户根据需要新增的自定义策略。可以修改，也可以删除。

## 新增私有模块告警策略
### 背景介绍
用于新增模块告警策略，例如，新增实例相关告警策略，Proxy相关告警策略等。 
以新增实例告警策略为例，新增模块告警策略操作如下：
### 操作步骤
1. 在赤兔管理台主界面，点击左侧菜单【告警分析】>【告警策略】，进入告警配置界面。
2. 点击【新增策略分组】，系统弹出【新增告警策略分组】对话框。
3. 将【对象】设置为实例，并输入新策略名，点击【保存】退出对话框。
4. 点击新定义的实例模块策略【命名】下方名称，进入【告警策略详细】界面。
5. 查看、修改并新增相关模块的具体指标告警策略。
 - 查看指标告警策略
    - 下拉右侧滚动条，可查看该节点所有告警策略。
    - 如有多页，点击右下方翻页按钮<<、<、>、>>或具体页数，查看对应页面告警信息。
 - 修改指标告警策略
点击列表【操作】栏下方【修改】，进入【设置告警指标策略】界面调整告警策略，具体操作方式参见“6.2.3设置指标告警策略”。
 - 删除指标告警策略 
点击列表【操作】栏下方【删除】，可删除该指标的告警策略。
 - 新增指标告警策略
点击【添加指标策略+】，进入【设置告警指标策略】界面新增告警策略，具体操作方式参见“6.2.3设置指标告警策略”。
6. 关联告警策略，在模块告警策略中应用该私有策略。
7. 进入对应的模块监控界面，例如，实例模块，则点击【实例管理】，进入实例管理界面。
8. 勾选所需实例，并点击列表上方【设置告警策略】，系统弹出设置告警对话框。在【告警策略】中选择新的自定义私有策略，点击【保存】保存设置并退出对话框。

## 修改和删除告警策略
### 背景介绍
用于修改和删除各模块的私有和共用告警策略，例如，实例相关告警策略，Proxy相关告警策略等。
### 修改模块告警策略
#### 操作步骤
1. 在赤兔管理台主界面，点击左侧菜单【告警分析】>【告警策略】，进入告警配置界面。
2. 在列表中可查看各模块的告警策略。
通过列表上方【监控对象】查找所需类型的策略。 修改模块策略名称，点击【操作】栏下方【修改】，在弹出的对话框中可修改策略名称。
3. 点击所需模块策略名称，进入【告警策略详细】界面。
4. 查看、修改并新增所需模块的具体指标告警策略。
 - 查看指标告警策略
    - 下拉右侧滚动条，可查看该节点所有告警策略。
    - 如有多页，点击右下方翻页按钮<<、<、>、>>或具体页数，查看对应页面告警信息。
    - 在列表右上方的模糊查询框中输入查询字段，筛选所需告警信息。
 - 修改指标告警策略
点击列表【操作】栏下方【修改】，进入【设置告警指标策略】界面调整告警策略，具体操作方式参见“6.2.3设置指标告警策略”。
 - 删除指标告警策略 
点击列表【操作】栏下方【删除】，可删除该指标的告警策略。
 - 新增指标告警策略
点击【添加指标策略+】，进入【设置告警指标策略】界面新增告警策略，具体操作方式参见“6.2.3设置指标告警策略”。

### 删除模块告警策略
>!只能删除私有策略，不能删除公共策略。
#### 操作步骤
1. 在赤兔管理台主界面，点击【告警分析】>【告警策略】，进入告警配置界面，点击需要删除的模块策略的【操作】栏下方【删除】，可删除自定义的私有策略。

## 设置指标告警策略
### 背景介绍
用于新增和调整模块的指标告警策略。 
### 操作步骤
1. 在赤兔管理台主界面，点击左侧菜单【告警分析】>【告警策略】，进入告警配置界面。
2. 点击所需模块策略名称，进入【告警策略详细】界面。
3. 在【告警策略详细】界面，选择所需指标策略【操作】栏下方【修改】，进入【设置告警指标策略(简易)】界面。
4. 设置告警指标策略。
 - 【启用状态】：可设置成开启和关闭。
 - 【告警设置】：设置指标值大于某值时产生告警，告警后的多久内自动屏蔽告警。
 - 【告警级别】：可设置为仅登记、短信告警（或微信）、NOC（自动拨打电话）告警。
 - 【告警降级】：可设置指定时间段内告警自动降级，目前支持自动拨打电话（NOC）降级到微信。以减少对运维人员的骚扰。（其中，00 ~ 23代表一天24小时时间段，例如，00代表00 ~ 01，01代表 01~02点。可多项设置）
5. 点击【高级设置】，进行告警指标策略的详细设置。
 - 【设置模板】：可修改告警设置说明。
 - 【设置参数】：监控每分钟采集一次指标值，如果连续 “10”分钟（10次），有“8”分钟（8次）采集到的指标值“>100”,则产生告警，产生告警后，“180”分钟内即使满足上述条件，也不会再告警，“180”分钟后，如果依然出现该情况，则重新告警。
 - 【扩展条件】：写法为json数组格式。例如，[expobj, expobj2]，其中expobj1 和 expobj2关系格式如下：`[{"key":"fjob_type","exp":"=","val":"groupaddinstance"},{"key":"is_finish","exp":"!=","val":"true"}]。
key则为该对象指标的英文key。 exp支持 >,<,=,!=。 例如：[{"key":"ismaster","exp":"=","val":"'true'"},{"key":"is_dcn_back","exp":"!=","val":"'true'"}]`
6. 点击【保存】，保存并退出高级设置。

## 自定义告警策略模板
### 背景介绍
用户可根据自身需要创建告警策略模板，可自定义全部模块的指标告警策略模板。
### 操作步骤
1. 在赤兔管理台主界面，点击左侧菜单【告警分析】>【告警策略-模板】，进入告警策略模板管理界面。
2. 点击【新增】，系统弹出【新增策略模板分组】对话框。
3. 输入创建的告警策略名称，点击【保存】退出对话框。在列表中显示系统默认设置的所有模块告警策略模板。
如需修改策略名称，点击右上方【修改】。
4. 查看、修改并新增指标告警策略模板。
 - 查看指标告警策略模板
    - 如有多页，点击右下方翻页按钮<<、<、>、>>或具体页数，查看对应页面告警策。
    - 可根据列表上方搜索栏的【策略模板】、【告警类型】、【告警指标】，再点击【查询】，筛选所需告警策略。
    - 在列表右上方的模糊查询框中输入查询字段，筛选所需告警策略。
 - 修改指标告警策略模板
点击列表【操作】栏下方【修改】，进入【配置告警策略项】界面调整告警策略模板。
通过输入【扩展条件】和添加【组合策略】条件，修改告警条件。
 - 新增指标告警策略模板
点击【新增策略项】，进入【配置告警策略项】界面设置告警策略模板。
通过输入【扩展条件】和添加【组合策略】条件，修改告警条件。
 - 删除指标告警策略
点击列表【操作】栏下方【删除】，可删除该指标的告警策略模板。
5. 发布告警策略模板。
点击搜索栏【策略模板】下拉选择需要发布的策略模板，再点击列表上方【应用策略模板】，在弹出的对话框中选择应用的集群，点击【保存】退出对话框。
 - 导出告警策略模板
点击搜索栏【策略模板】下拉选择需要导出的策略模板，点击列表上方【导出策略模板】，可将告警策略模板导出到本地保存。 如果需要应用导出的策略模板，可通过【告警分析】>【告警策略】>【导入策略模板】，进行导入应用。
 - 删除告警策略模板
点击搜索栏【策略模板】下拉选择需要删除的策略模板，点击列表右上方【删除】进行删除。
